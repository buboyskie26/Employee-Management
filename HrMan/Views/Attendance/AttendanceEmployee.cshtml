@using System.Globalization;
@using System;

@model SingleAttendanceEmployee;
@{
    ViewData["Title"] = "Attendance Employee";


    DateTime startDate = new DateTime((int)DateTime.UtcNow.Year, (int)DateTime.UtcNow.Month, (int)DateTime.UtcNow.Day, 8, 0, 0, DateTimeKind.Utc);
    DateTime endDate = new DateTime((int)DateTime.UtcNow.Year, (int)DateTime.UtcNow.Month, (int)DateTime.UtcNow.Day, 17, 0, 0, DateTimeKind.Utc);

  

   @* DateTime time = Model.Attendances.Select(i => i.LoginDate);
    DateTime endTime = Model.Attendances.Select(i => i.IsLogOff).FirstOrDefault();

    var output = (endTime - time).TotalHours;*@
}



<div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
    <!--begin::Header-->
    <div class="content col-md-10 offset-1 fs-6 d-flex flex-column flex-column-fluid" id="kt_content">
        <!--begin::Toolbar-->
        <div class="toolbar mb-3 text-center" id="kt_toolbar">

            <h2 class="text-dark text-center fw-bolder my-1 fs-2">Attendance Employees</h2>


        </div>
        <!--end::Toolbar-->
        <!--begin::Post-->
        <div class="post fs-6 d-flex flex-column-fluid" id="kt_post">
            <!--begin::Container-->
            <div class="container-xxl">
                <!--begin::Card-->
                <div class="card">

                    <div class="card-body pt-0">
                        <!--begin::Table-->
                        <div id="kt_table_users_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
                            <div class="table-responsive">
                                <table class="table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer" id="kt_table_users">
                                    <!--begin::Table head-->
                                    <thead class="text-center">
                                        <!--begin::Table row-->
                                        <tr class="text-start text-muted fw-bolder fs-7 text-uppercase gs-0">
                                            <th class="w-10px pe-2 sorting_disabled" rowspan="1" colspan="1" aria-label="



													" style="width: 29.25px;">
                                                <div class="form-check form-check-sm form-check-custom form-check-solid me-3">
                                                    <input class="form-check-input" type="checkbox" data-kt-check="true" data-kt-check-target="#kt_table_users .form-check-input" value="1">
                                                </div>
                                            </th>
                                            <th class="min-w-125px sorting" tabindex="0" aria-controls="kt_table_users" rowspan="1" colspan="1" aria-label="Role: activate to sort column ascending" style="width: 125px;">Log Date</th>
                                            <th class="min-w-125px sorting" tabindex="0" aria-controls="kt_table_users" rowspan="1" colspan="1" aria-label="Last login: activate to sort column ascending" style="width: 125px;">Time In</th>
                                            <th class="min-w-125px sorting" tabindex="0" aria-controls="kt_table_users" rowspan="1" colspan="1" aria-label="Last login: activate to sort column ascending" style="width: 125px;">Time Out</th>
                                            <th class="min-w-125px sorting" tabindex="0" aria-controls="kt_table_users" rowspan="1" colspan="1" aria-label="Last login: activate to sort column ascending" style="width: 125px;">Status</th>
                                            <th class="min-w-125px sorting" tabindex="0" aria-controls="kt_table_users" rowspan="1" colspan="1" aria-label="Last login: activate to sort column ascending" style="width: 125px;">OT</th>
                                            <th class="min-w-125px sorting" tabindex="0" aria-controls="kt_table_users" rowspan="1" colspan="1" aria-label="Last login: activate to sort column ascending" style="width: 125px;">Total</th>
                                        </tr>
                                    </thead>

                                    <tbody class="text-gray-600 fw-bold">


                                        @foreach (var item in Model.Attendances)
                                        {
                                            <tr class="odd text-center">
                                                <td>
                                                    <div class="form-check form-check-sm form-check-custom form-check-solid">
                                                        <input class="form-check-input" type="checkbox" value="1">
                                                    </div>
                                                </td>

                                                <td>@item.LoginDate.ToLongDateString()</td>
                                                <td>@item.LoginDate.ToString("hh:mm tt", CultureInfo.InvariantCulture)</td>
                                                <td>@item.LogOffDate.ToString("hh:mm tt", CultureInfo.InvariantCulture)</td>


                                                <td>
                                                    @if (item.LoginDate > startDate)
                                                    {


                                                        <button class="btn btn-block btn-danger text-white btn-sm" style="cursor:not-allowed;">Late</button>

                                                    }
                                                    else
                                                    {
                                                        <button class="btn btn-block btn-success text-white btn-sm" style="cursor:not-allowed;">On Time</button>

                                                    }

                                                </td>
                                                @if (item.LogOffDate > endDate)
                                                {

                                                    <td>
                                                        <button class="btn btn-block btn-success text-white btn-sm" style="cursor: not-allowed; background: #63d471 ">
                                                            <i class="fa fa-check"></i>
                                                        </button>
                                                    </td>


                                                }
                                                else
                                                {
                                                    <td>
                                                        <button class="btn btn-block text-white btn-sm" style="cursor: not-allowed; background: #a71d31;">
                                                            <i class="fa fa-times"></i>
                                                        </button>
                                                    </td>

                                                }



                                                <td>
                                                    @{
                                                        var sDate = item.LoginDate;
                                                        var eDate = item.LogOffDate;

                                                        int tDate = (int)(eDate - sDate).TotalHours;
                                                    }
                                                    @tDate
                                                </td>
                                            </tr>
                                        }


                                    </tbody>

                                    <tfoot>
                                       
                                            <tr>
                                                <th rowspan="1" colspan="1"> </th>
                                                <th rowspan="1" colspan="1"> </th>

                                                <th rowspan="1" colspan="1"> </th>
                                                <th rowspan="1" colspan="1"> </th>
                                                <th rowspan="1" colspan="1"> </th>
                                                <th rowspan="1" colspan="1"> </th>
                                                <th class="text-center" rowspan="1" colspan="1">
                                                    @{

                                                        var output = 0;
                                                      
                                                        foreach (var item in Model.Attendances)
                                                        {
                                                            
                                                            var sDate = item.LoginDate;
                                                            var eDate = item.LogOffDate;

                                                            int tDate = (int)(eDate - sDate).TotalHours;
                                                           @* output = (int)(outTime - inTime).TotalSeconds;*@

                                                             @*output = inTime.Hour + outTime.Hour;*@

                                                        output += tDate;
                                                    }
                                                    }
                                                     @output Hrs
                                                </th>
                                            </tr>

                                         
                                    </tfoot>

                                    </table>
                            </div><div class="row"><div class="col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"></div><div class="col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end"><div class="dataTables_paginate paging_simple_numbers" id="kt_table_users_paginate"><ul class="pagination"><li class="paginate_button page-item previous disabled" id="kt_table_users_previous"><a href="#" aria-controls="kt_table_users" data-dt-idx="0" tabindex="0" class="page-link"><i class="previous"></i></a></li><li class="paginate_button page-item active"><a href="#" aria-controls="kt_table_users" data-dt-idx="1" tabindex="0" class="page-link">1</a></li><li class="paginate_button page-item "><a href="#" aria-controls="kt_table_users" data-dt-idx="2" tabindex="0" class="page-link">2</a></li><li class="paginate_button page-item "><a href="#" aria-controls="kt_table_users" data-dt-idx="3" tabindex="0" class="page-link">3</a></li><li class="paginate_button page-item next" id="kt_table_users_next"><a href="#" aria-controls="kt_table_users" data-dt-idx="4" tabindex="0" class="page-link"><i class="next"></i></a></li></ul></div></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>


 